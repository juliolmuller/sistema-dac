<?xml version="1.0" encoding="UTF-8" ?>

<ui:composition template="WEB-INF/templates/layout.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
	      xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
        xmlns:p="http://primefaces.org/ui"
        xmlns:my="http://lacussoft.com/sijoga/tags">

    <ui:define name="header">
        <div class="d-flex justify-content-between">
            <div class="user-welcome">
                Bem vindo, <h:outputText value="#{sessionScope.user.name}" />
            </div>
            <h:form prependId="false">
                <h:commandButton id="btn-logout" value="Logout" action="#{loginBean.logout()}" />
            </h:form>
        </div>
        <div id="filtros">
            <div id="div-filtro-situacao" style="display: inline-block;">
                Situação:
                <select class="filtro" id="filtro-situacao">
                    <option>Todos</option>
                    <option>Em aberto</option>
                    <option>Encerrado</option>
                </select>
            </div>
        </div>
    </ui:define>

    <ui:define name="content">
        <h:panelGroup id="alerts" layout="block">
            <my:toasts messages="#{facesContext.messageList}" />
        </h:panelGroup>
        <div class="processes">
            <div class="process-card-deck">
                <ui:repeat var="process" value="#{indexBean.processes}">
                    <div class="process-card d-flex justify-content-between">
                        <span>#{process.id} (<b>Juiz:</b> #{process.judge.name} - <b>Promovente:</b> #{process.promoter.name} - <b>Promovido:</b> #{process.promoted.name})</span>
                        <h:link value="Visualizar" outcome="processos?id=#{process.id}" />
                    </div>
                </ui:repeat>
            </div>
        </div>
        <h:link styleClass="new-process-btn" value="+ Novo Processo" outcome="processos?action=new" />
    </ui:define>

</ui:composition>
